<?xml version="1.0" encoding="utf-8"?>

<resources>

    <!-- Creates the database. -->
    <string name="SQL_on_create" translatable="false">        
        CREATE TABLE trip (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
                           title TEXT NOT NULL,
                           description TEXT,
                           trip_date TIMESTAMP NOT NULL);
        
        CREATE TABLE trip_location (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
                                    id_trip INTEGER NOT NULL,
                                    location_time TIMESTAMP NOT NULL,
                                    latitude REAL NOT NULL,
                                    longitude REAL NOT NULL,
                                    altitude REAL,
                                    speed REAL,
                                    accuracy REAL,
                                    bearing REAL,
                                    provider TEXT,
                                    FOREIGN KEY(id_trip) REFERENCES trip(id));
    </string>

    <!-- Drop all the tables. -->
    <!--DROP TABLE trip_location;-->
    <!--DROP TABLE trip;-->
    <string name="SQL_on_upgrade" translatable="false">
    <![CDATA[
            CREATE TABLE trip_new (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
                           title TEXT NOT NULL,
                           description TEXT,
                           trip_date TIMESTAMP NOT NULL);

            INSERT INTO trip_new SELECT id, description, null, trip_date FROM trip;
            DROP TABLE trip;
            ALTER TABLE trip_new RENAME TO trip;
    ]]>
    </string>
    
    <string name="SQL_get_last_active_trip">
        <![CDATA[
            SELECT *
            FROM trip
            WHERE date(trip_date / 1000, \'unixepoch\', \'localtime\') =  date (\'now\')
        ]]>
    </string>

    <string name="SQL_get_all_trips">
        <![CDATA[
            SELECT * FROM trip ORDER BY trip_date DESC
        ]]>
    </string>

</resources>